{% comment %}
Feature Tabs Section
- Variable number of tabs (user-configurable)
- Each tab: image, title, description
- Responsive: side-by-side on desktop, stacked on mobile
- Tab switching with minimal JS
{% endcomment %}

<style>
.feature-tabs-section {
  background: #f6f7fa;
  padding: 2rem 0;
}
.feature-tabs-nav {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}
.feature-tabs-nav button {
  background: #fff;
  border: 1px solid #d1d5db;
  border-radius: 2rem;
  padding: 0.5rem 2rem;
  font-size: 1.1rem;
  cursor: pointer;
  transition: background 0.2s, color 0.2s;
}
.feature-tabs-nav button.active {
  background: #18181b;
  color: #fff;
  border-color: #18181b;
}
.feature-tabs-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 3rem;
  background: none;
}
.feature-tabs-image {
  flex: 1 1 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.feature-tabs-image img {
  max-width: 100%;
  border-radius: 2rem;
  background: #b3b5b8;
  object-fit: cover;
}
.feature-tabs-text {
  flex: 1 1 0;
}
.feature-tabs-title {
  font-size: 2.5rem;
  font-weight: bold;
  margin-bottom: 1rem;
}
.feature-tabs-desc {
  font-size: 1.2rem;
  color: #222;
}
@media (max-width: 900px) {
  .feature-tabs-content {
    flex-direction: column;
    gap: 2rem;
    text-align: center;
  }
  .feature-tabs-title {
    font-size: 2rem;
  }
}
</style>

<div class="feature-tabs-section">
  <div class="feature-tabs-nav" id="feature-tabs-nav-{{ section.id }}">
    {% for block in section.blocks %}
      <button type="button" class="{% if forloop.first %}active{% endif %}" data-tab-index="{{ forloop.index0 }}">{{ block.settings.title | escape }}</button>
    {% endfor %}
  </div>
  <div>
    {% for block in section.blocks %}
      <div class="feature-tabs-content" id="feature-tab-content-{{ section.id }}-{{ forloop.index0 }}" style="{% unless forloop.first %}display:none;{% endunless %}">
        <div class="feature-tabs-image">
          {% if block.settings.image != blank %}
            <img src="{{ block.settings.image | image_url: width: 600 }}" alt="{{ block.settings.title | escape }}">
          {% else %}
            <div style="width: 200px; height: 200px; background: #b3b5b8; border-radius: 2rem; display: flex; align-items: center; justify-content: center;">
              <svg width="64" height="64" fill="none" stroke="#888" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 21l-6-6-3 3-4-4-3 3"/></svg>
            </div>
          {% endif %}
        </div>
        <div class="feature-tabs-text">
          <div class="feature-tabs-title">{{ block.settings.title }}</div>
          <div class="feature-tabs-desc">{{ block.settings.description }}</div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

<script>
(function() {
  var nav = document.getElementById('feature-tabs-nav-{{ section.id }}');
  if (!nav) return;
  var buttons = nav.querySelectorAll('button');
  var contents = [];
  {% for block in section.blocks %}
    contents.push(document.getElementById('feature-tab-content-{{ section.id }}-{{ forloop.index0 }}'));
  {% endfor %}
  nav.addEventListener('click', function(e) {
    if (e.target.tagName !== 'BUTTON') return;
    var idx = e.target.getAttribute('data-tab-index');
    buttons.forEach(function(btn, i) {
      btn.classList.toggle('active', i == idx);
      if (contents[i]) contents[i].style.display = (i == idx ? '' : 'none');
    });
  });
})();
</script>

{% schema %}
{
  "name": "Feature Tabs",
  "tag": "section",
  "class": "section",
  "settings": [],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature Tab",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Feature Title"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Feature description goes here."
        }
      ]
    }
  ],
  "max_blocks": 8,
  "presets": [
    {
      "name": "Feature Tabs",
      "blocks": [
        { "type": "feature" },
        { "type": "feature" },
        { "type": "feature" }
      ]
    }
  ]
}
{% endschema %} 