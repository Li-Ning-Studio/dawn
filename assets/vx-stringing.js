import{u as t,h as S,y as O,k as N,D as V}from"./vx-hooks.module.js";import{R as L,P as j,O as W,C as q,D as G}from"./vx-index.js";import{c as $,f as U}from"./vx-shopify-client.js";import"./vx-compat.module.js";const Q=({rating:o,metricName:s})=>{const r=80*Math.PI,c=r-o/10*r,d=()=>{switch(s){case"Durability":return"#17c37b";case"Control":return"#0bbcd6";case"Repulsion Power":return"#ff4081";case"Hitting Sound":return"#ffd101";case"Shock Absorption":return"#083ea7";default:return"#000"}},i=()=>{switch(s){case"Shock Absorption":return"Absorption";case"Hitting Sound":return"Sound";case"Repulsion Power":return"Repulsion";default:return s}};return t("div",{style:{position:"relative",display:"flex",height:"130px",width:"130px",alignItems:"center",justifyContent:"center"},children:[t("svg",{height:"100%",width:"100%",viewBox:"0 0 100 100",style:{position:"absolute",transform:"rotate(-90deg)"},children:[t("circle",{stroke:"#ccc",strokeWidth:"7",fill:"transparent",r:40,cx:"50",cy:"50",style:{strokeDasharray:`${r} ${r}`}}),t("circle",{stroke:d(),strokeWidth:"7",strokeDasharray:`${r} ${r}`,style:{strokeDashoffset:c,transition:"stroke-dashoffset 0.35s"},fill:"transparent",r:40,cx:"50",cy:"50"})]}),t("div",{style:{position:"absolute",textAlign:"center"},children:[t("div",{style:{fontSize:"16px",fontWeight:"600"},children:[o,"/",10]}),t("div",{style:{fontSize:"12px"},children:i()})]})]})},z=o=>{const s=[];if(o.metafields&&Array.isArray(o.metafields)){const l=new Map(o.metafields.filter(r=>!!r).map(r=>[r.key,parseInt(r.value)||0]));[{key:"durability",name:"Durability"},{key:"control",name:"Control"},{key:"repulsion_power",name:"Repulsion Power"},{key:"hitting_sound",name:"Hitting Sound"},{key:"shock_absorption",name:"Shock Absorption"}].forEach(({key:r,name:c})=>{const d=l.get(r);typeof d=="number"&&d>0&&s.push({name:c,value:d})})}return s.sort((l,h)=>h.value-l.value).slice(0,3)},B=o=>{const s=[];if(console.log(o.metafields.filter(l=>!!l)),o.metafields&&Array.isArray(o.metafields)){const l=new Map(o.metafields.filter(r=>!!r).map(r=>[r.key,r.value]));[{key:"core_material",name:"CORE MATERIAL"},{key:"outer_material",name:"OUTER MATERIAL"}].forEach(({key:r,name:c})=>{const d=l.get(r);d&&typeof d=="string"&&d.trim()&&s.push({name:c,value:d})})}return s},Y=({closeStringsGuide:o,stringingProducts:s})=>t("div",{style:{position:"relative",padding:"12px",marginTop:"8rem",background:"white",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",pointerEvents:"auto",minHeight:"100vh"},children:t("div",{style:{maxWidth:"768px",margin:"0 auto",paddingBottom:"5rem"},children:[t("div",{style:{position:"sticky",top:0,zIndex:10,display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",backgroundColor:"white",padding:"18px 0"},children:[t("span",{onClick:o,style:{outline:"none",display:"flex",gap:"4px",background:"none",border:"none",cursor:"pointer"},children:t("span",{children:"← Back to product"})}),t("button",{onClick:o,style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"×"})]}),t("section",{style:{lineHeight:"1.6",color:"var(--gray-70)"},children:[t("div",{children:[t("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"black"},children:"Badminton Strings Guide"}),t("p",{style:{marginTop:"8px"},children:"Selecting the right string for your racket is crucial as it significantly affects your performance on the court. Our collection provides strings that cater to every playing style."})]}),t("div",{style:{marginTop:"32px",width:"100%",display:"flex",flexDirection:"column",gap:"20px",color:"var(--gray-90)"},children:s.filter(l=>l.availableForSale).map((l,h)=>{var r,c,d;return t("div",{children:[t("div",{style:{padding:"20px 0"},children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:t("img",{width:90,src:(r=l.featuredImage)==null?void 0:r.url,alt:((c=l.featuredImage)==null?void 0:c.altText)||""})}),t("div",{style:{marginTop:"16px"},children:[t("h4",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"8px"},children:l.title}),t("p",{style:{lineHeight:"1.4"},children:((d=l.metafield)==null?void 0:d.value)||"High-quality string designed for optimal performance and durability."}),B(l).length>0&&t("div",{style:{marginTop:"20px",display:"flex",flexDirection:"column",gap:"20px"},children:B(l).map(i=>t("div",{children:[t("h3",{style:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--gray-70)",marginBottom:"4px"},children:i.name}),t("p",{style:{fontSize:"16px",lineHeight:"1.3",color:"black",margin:"0"},children:i.value})]},i.name))}),z(l).length>0&&t("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center",gap:"20px"},children:z(l).map(i=>t(Q,{metricName:i.name,rating:i.value},i.name))})]})]}),h<s.filter(i=>i.availableForSale).length-1&&t("hr",{style:{margin:"0",backgroundColor:"#e4e4e4",border:"none",height:"1px"}})]},l.id)})})]})]})});function J({stringingCollectionId:o,maxTension:s}){var T,I,A;const r=parseInt(((T=s==null?void 0:s.match(/\d+/g))==null?void 0:T.pop())||"69"),[c,d]=S([]),[i,k]=S({stringProduct:null,stringVariant:null,tension:null}),[E,w]=S(!1),[P,M]=S("All"),C=e=>{const n=new Map,u=e==null?void 0:e.metafields;if(u&&Array.isArray(u))for(const g of u){if(!g)continue;const a=g.value??"",p=typeof a=="string"?a.match(/\d+(?:\.\d+)?/):null,m=p?parseFloat(p[0]):NaN;Number.isNaN(m)||n.set(g.key,m)}return{durability:n.get("durability")??0,control:n.get("control")??0,repulsion:n.get("repulsion_power")??0,sound:n.get("hitting_sound")??0,shock:n.get("shock_absorption")??0}},b=e=>C(e).repulsion>=9.5,v=e=>C(e).durability>=9.5,H=()=>{const e=c.filter(n=>n.availableForSale);switch(P){case"Power":return e.filter(n=>b(n));case"Durable":return e.filter(n=>v(n));case"Balanced":return e.filter(n=>!b(n)&&!v(n));case"All":default:return e}},x=c.filter(e=>e.availableForSale),F={All:x.length,Power:x.filter(e=>b(e)).length,Durable:x.filter(e=>v(e)).length,Balanced:x.filter(e=>!b(e)&&!v(e)).length};return O(()=>{(async()=>{var e,n,u,g;try{const{data:a,errors:p}=await $.request(U,{variables:{id:`gid://shopify/Collection/${o}`}});p!=null&&p.message&&console.error({errorsCol:p}),(n=(e=a==null?void 0:a.collection)==null?void 0:e.products)!=null&&n.nodes&&((g=(u=a==null?void 0:a.collection)==null?void 0:u.products)==null?void 0:g.nodes.length)>0&&d((a==null?void 0:a.collection.products.nodes)||[])}catch(a){console.error(a),document.getElementsByClassName("frame")[0].style.display="none"}})()},[]),c.length==0?t("p",{children:"Loading"}):t(N,{children:[t("form",{id:"stringing-form",style:{marginTop:"2rem"},children:[t("div",{id:"strings-container",children:[t("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t("legend",{className:"form__label",children:t("span",{children:"Choose String"})}),t("button",{type:"button",onClick:()=>w(!0),style:{fontFamily:"inherit",border:"none",background:"transparent",padding:0,marginBottom:"0.6rem",whiteSpace:"nowrap",flexShrink:0,outline:"none",textDecoration:"underline",fontSize:"1.3rem",textTransform:"capitalize"},children:"Strings Guide"})]}),t("div",{style:{marginTop:"1.5rem"},children:[t("style",{children:`
              .stringing-pills [data-count="0"]:not([data-key="All"]) { display: none; }
            `}),t("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",fontSize:"1.4rem"},className:"stringing-pills",children:["All","Power","Durable","Balanced"].map(e=>{const n=P===e;return t("div",{"data-key":e,"data-count":F[e]??0,onClick:()=>M(e),style:{cursor:"pointer",borderRadius:"20px",padding:"0.2rem 1.5rem",background:n?"var(--accent-color, #000)":"#efefef",color:n?"#fff":"inherit",border:"none"},children:e},e)})})]}),H().map(e=>{var u,g,a,p,m,y;const n=e==null?void 0:e.id.split("/").pop();return t("label",{className:"sheet",htmlFor:n,style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",alignItems:"center",margin:"1.5rem 0",justifyContent:"space-between",paddingRight:"1rem",overflow:"hidden",transition:"all 0.3s",outline:((u=i.stringProduct)==null?void 0:u.id)===e.id?"2px solid var(--accent-color)":"2px solid transparent"},children:[t("input",{disabled:(e==null?void 0:e.availableForSale)===!1,onChange:R=>{k({stringProduct:e,stringVariant:null,tension:null}),D("string-variants-container")},required:!0,type:"radio",name:"string-product",id:n}),t("div",{style:{display:"flex",alignItems:"center",gridColumn:"1/12",padding:"6px 0",fontSize:"1.4rem"},children:[t("img",{width:80,height:80,src:(g=e.featuredImage)==null?void 0:g.url,alt:((a=e.featuredImage)==null?void 0:a.altText)||""}),t("div",{style:{width:"100%",letterSpacing:"0px"},children:[t("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[t("p",{style:{color:"var(--gray-90)",margin:"0"},children:e==null?void 0:e.title}),((p=e==null?void 0:e.productTagMetafield)==null?void 0:p.value)&&t("span",{style:{fontSize:"12px",color:"#333",padding:"0 8px",borderRadius:"99px",border:"1px solid #999"},children:e.productTagMetafield.value})]}),t("span",{style:{color:"var(--gray-60)",fontSize:"1.25rem"},children:[parseInt(e.priceRange.minVariantPrice.amount)," ",e.priceRange.minVariantPrice.currencyCode]})]}),(m=e==null?void 0:e.metafield)!=null&&m.value?t("p",{style:{margin:"0",lineHeight:"1.4",color:"var(--gray-60)"},children:(y=e==null?void 0:e.metafield)==null?void 0:y.value}):null]})]})]},n)}),null]}),t("div",{style:{scrollMarginTop:"10rem"},id:"string-variants-container",children:i.stringProduct?t("div",{children:[t("legend",{className:"form__label",children:t("span",{children:["Select Color for ",i.stringProduct.title," String"]})}),t("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"1rem"},children:i.stringProduct.variants.nodes.sort((e,n)=>e.id>n.id?1:-1).sort((e,n)=>e.availableForSale?-1:1).filter(e=>e.availableForSale).map(e=>{var a,p,m,y,R;const n=e.id.split("/").pop(),u=(m=(p=(a=i.stringProduct)==null?void 0:a.options[0].optionValues.find(_=>_.name==e.title))==null?void 0:p.swatch)==null?void 0:m.color,g=e.availableForSale===!1;return t("label",{className:"sheet",htmlFor:n,style:{opacity:g?.1:1,width:"50px",height:"50px",borderRadius:"100%",display:"flex",alignItems:"center",marginRight:"0.4rem",justifyContent:"center",outline:((y=i.stringVariant)==null?void 0:y.id)===e.id?"2px solid var(--accent-color)":"2px solid transparent"},children:[t("input",{"data-sku":e.sku,"data-string":(((R=i==null?void 0:i.stringProduct)==null?void 0:R.title)||"")+" - "+e.title,disabled:e.availableForSale===!1,onChange:_=>{k({stringProduct:i.stringProduct,stringVariant:e,tension:i.tension}),D("string-tensions-container")},required:!0,type:"radio",name:"string-variant",id:n}),u?t("span",{style:{width:"46px",height:"46px",background:u,borderRadius:"100%",display:"block"}}):t("span",{children:e.title})]},n)})})]}):null}),t("div",{style:{scrollMarginTop:"10rem"},id:"string-tensions-container",children:i.stringVariant?t("div",{children:[t("legend",{className:"form__label",children:t("span",{children:"adjust Tension"})}),t("div",{style:{display:"grid",gap:"1.5rem",justifyContent:"start",gridTemplateColumns:"repeat(4, 1fr)",marginTop:"1rem"},children:Array.from({length:20},(e,n)=>n+21).map(e=>t("label",{className:"sheet",htmlFor:String(e),style:{fontSize:window.innerWidth>768?"1.6rem":"1.4rem",display:r<e?"none":"block",padding:"0.8rem 0",textAlign:"center",outline:i.tension===e?"2px solid var(--accent-color)":"2px solid transparent",color:i.tension===e?"black":"var(--gray-70)",transition:"all 0.3s"},children:[t("input",{onChange:n=>{k({stringProduct:i.stringProduct,stringVariant:i.stringVariant,tension:e})},required:!0,type:"radio",name:"string-tension",id:String(e)}),t("span",{children:[e,"LBS"]})]},e))})]}):null}),i.stringVariant&&i.tension?t("div",{style:{background:"rgb(233, 255, 241)",padding:"0.2rem 2rem",borderRadius:"10px",color:"#002d03",fontSize:"1.5rem",lineHeight:"1.6",letterSpacing:"0.03rem"},children:t("p",{children:["All set for the court! You are customising this ",window.s3_product_name," Racket with"," ",(I=i.stringVariant)==null?void 0:I.selectedOptions[0].value," ",(A=i.stringProduct)==null?void 0:A.title,", strung at the tension of"," ",i.tension," LBS."]})}):null]}),t(L,{open:E,onOpenChange:w,children:t(j,{children:[t(W,{style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999}}),t(q,{style:{position:"fixed",top:"0",left:0,width:"100vw",height:"100vh",zIndex:1e3,overflow:"auto",backgroundColor:"rgba(0, 0, 0, 0.5)",pointerEvents:"none"},children:[t(G,{}),t(Y,{closeStringsGuide:()=>w(!1),stringingProducts:c})]})]})})]})}const D=o=>{document.getElementById(o)&&setTimeout(()=>{var l;(l=window.document.getElementById(o))==null||l.scrollIntoView({behavior:"smooth"})},500)},f=document.getElementById("stringing-root"),K=(f==null?void 0:f.dataset.stringingCollectionId)||null,X=(f==null?void 0:f.dataset.maxTension)||null;V(t(J,{stringingCollectionId:K,maxTension:X}),f);
