import{h as v,y as _,u as n,c as w,f as V,D as C}from"./vx-shopify-client.js";function I({stringingCollectionId:b,maxTension:S}){var m,h;const x=parseInt((S||"69").replace(/[^\d.]/g,"")),[g,P]=v([]),[t,u]=v({stringProduct:null,stringVariant:null,tension:null});return _(()=>{(async()=>{var e,r,l,s,a,c;try{const{data:i,errors:o}=await w.request(V,{variables:{id:`gid://shopify/Collection/${b}`}});if(o!=null&&o.message&&console.error({errorsCol:o}),(r=(e=i==null?void 0:i.collection)==null?void 0:e.products)!=null&&r.nodes&&((s=(l=i==null?void 0:i.collection)==null?void 0:l.products)==null?void 0:s.nodes.length)>0){const p=(c=(a=i==null?void 0:i.collection)==null?void 0:a.products)==null?void 0:c.nodes;P((i==null?void 0:i.collection.products.nodes)||[]);const f=p.find(y=>y&&y.tags.includes("Service"));f&&(window.s3_stringing_service_variant_id=f.variants.nodes[0].id.split("/").pop())}}catch(i){console.error(i),document.getElementsByClassName("frame")[0].style.display="none"}})()},[]),g.length==0?n("p",{children:"Loading"}):n("form",{id:"stringing-form",style:{},children:[n("div",{children:[n("legend",{className:"form__label",children:n("span",{children:"String"})}),g.filter(e=>!(e!=null&&e.tags.includes("Service"))).filter(e=>e.availableForSale).map(e=>{var l,s,a;const r=e==null?void 0:e.id.split("/").pop();return n("label",{className:"sheet",htmlFor:r,style:{display:"flex",alignItems:"center",margin:"1.5rem 0",justifyContent:"space-between",paddingRight:"1rem",overflow:"hidden",transition:"all 0.3s",outline:((l=t.stringProduct)==null?void 0:l.id)===e.id?"2px solid var(--accent-color)":"2px solid transparent"},children:[n("input",{disabled:(e==null?void 0:e.availableForSale)===!1,onChange:c=>{u({stringProduct:e,stringVariant:null,tension:null})},required:!0,type:"radio",name:"string-product",id:r}),n("div",{style:{display:"flex",alignItems:"center"},children:[n("img",{width:80,src:(s=e.featuredImage)==null?void 0:s.url,alt:((a=e.featuredImage)==null?void 0:a.altText)||""}),n("span",{style:{color:"var(--gray-80)",fontSize:"1.5rem"},children:e==null?void 0:e.title})]}),n("div",{style:{fontSize:"1.2rem"},children:[e.priceRange.minVariantPrice.amount," ",e.priceRange.minVariantPrice.currencyCode]})]},r)})]}),n("div",{children:t.stringProduct?n("div",{children:[n("legend",{className:"form__label",children:n("span",{children:((h=(m=t.stringVariant)==null?void 0:m.selectedOptions.find(e=>e.name==="Color"))==null?void 0:h.value)||"Choose Color"})}),n("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"1rem"},children:t.stringProduct.variants.nodes.sort((e,r)=>e.id>r.id?1:-1).sort((e,r)=>e.availableForSale?-1:1).map(e=>{var a,c,i,o;const r=e.id.split("/").pop(),l=(i=(c=(a=t.stringProduct)==null?void 0:a.options[0].optionValues.find(p=>p.name==e.title))==null?void 0:c.swatch)==null?void 0:i.color,s=e.availableForSale===!1;return n("label",{className:"sheet",htmlFor:r,style:{opacity:s?.1:1,width:"50px",height:"50px",borderRadius:"100%",display:"flex",alignItems:"center",marginRight:"0.4rem",justifyContent:"center",outline:((o=t.stringVariant)==null?void 0:o.id)===e.id?"2px solid var(--accent-color)":"2px solid transparent"},children:[n("input",{"data-sku":e.sku,disabled:e.availableForSale===!1,onChange:p=>{u({stringProduct:t.stringProduct,stringVariant:e,tension:t.tension})},required:!0,type:"radio",name:"string-variant",id:r}),l?n("span",{style:{width:"46px",height:"46px",background:l,borderRadius:"100%",display:"block"}}):n("span",{children:e.title})]},r)})})]}):null}),n("div",{children:t.stringVariant?n("div",{children:[n("legend",{className:"form__label",children:n("span",{children:"Tension"})}),n("div",{style:{display:"grid",gap:"1.5rem",justifyContent:"start",gridTemplateColumns:"repeat(4, 1fr)",marginTop:"1rem"},children:Array.from({length:20},(e,r)=>r+21).map(e=>n("label",{className:"sheet",htmlFor:String(e),style:{fontSize:window.innerWidth>768?"1.6rem":"1.4rem",display:x<e?"none":"block",borderRadius:"var(--variant-pills-radius)",padding:"0.4rem 0",textAlign:"center",outline:t.tension===e?"2px solid var(--accent-color)":"2px solid transparent",color:t.tension===e?"black":"var(--gray-70)",transition:"all 0.3s"},children:[n("input",{onChange:r=>{u({stringProduct:t.stringProduct,stringVariant:t.stringVariant,tension:e})},required:!0,type:"radio",name:"string-tension",id:String(e)}),n("span",{children:[e,"LBS"]})]},e))})]}):null})]})}const d=document.getElementById("stringing-root"),F=(d==null?void 0:d.dataset.stringingCollectionId)||null,T=(d==null?void 0:d.dataset.maxTension)||null;C(n(I,{stringingCollectionId:F,maxTension:T}),d);
