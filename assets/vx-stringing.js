import{u as e,h as b,y as P,k as z,D as _}from"./vx-hooks.module.js";import{R as A,P as M,O as B,C as V,D as E}from"./vx-index.js";import{c as F,f as D}from"./vx-shopify-client.js";import"./vx-compat.module.js";const O=({rating:l,metricName:a})=>{const r=80*Math.PI,n=r-l/10*r,o=()=>{switch(a){case"Durability":return"#17c37b";case"Control":return"#0bbcd6";case"Repulsion Power":return"#ff4081";case"Hitting Sound":return"#ffd101";case"Shock Absorption":return"#083ea7";default:return"#000"}},c=()=>{switch(a){case"Shock Absorption":return"Absorption";case"Hitting Sound":return"Sound";case"Repulsion Power":return"Repulsion";default:return a}};return e("div",{style:{position:"relative",display:"flex",height:"130px",width:"130px",alignItems:"center",justifyContent:"center"},children:[e("svg",{height:"100%",width:"100%",viewBox:"0 0 100 100",style:{position:"absolute",transform:"rotate(-90deg)"},children:[e("circle",{stroke:"#ccc",strokeWidth:"7",fill:"transparent",r:40,cx:"50",cy:"50",style:{strokeDasharray:`${r} ${r}`}}),e("circle",{stroke:o(),strokeWidth:"7",strokeDasharray:`${r} ${r}`,style:{strokeDashoffset:n,transition:"stroke-dashoffset 0.35s"},fill:"transparent",r:40,cx:"50",cy:"50"})]}),e("div",{style:{position:"absolute",textAlign:"center"},children:[e("div",{style:{fontSize:"16px",fontWeight:"600"},children:[l,"/",10]}),e("div",{style:{fontSize:"12px"},children:c()})]})]})},I=l=>{const a=[];if(l.metafields&&Array.isArray(l.metafields)){const i=new Map(l.metafields.map(r=>[r.key,parseInt(r.value)||0]));[{key:"durability",name:"Durability"},{key:"control",name:"Control"},{key:"repulsion_power",name:"Repulsion Power"},{key:"hitting_sound",name:"Hitting Sound"},{key:"shock_absorption",name:"Shock Absorption"}].forEach(({key:r,name:n})=>{const o=i.get(r);typeof o=="number"&&o>0&&a.push({name:n,value:o})})}return a.sort((i,p)=>p.value-i.value).slice(0,3)},R=l=>{const a=[];if(l.metafields&&Array.isArray(l.metafields)){const i=new Map(l.metafields.map(r=>[r.key,r.value]));[{key:"core_material",name:"CORE MATERIAL"},{key:"outer_material",name:"OUTER MATERIAL"}].forEach(({key:r,name:n})=>{const o=i.get(r);o&&typeof o=="string"&&o.trim()&&a.push({name:n,value:o})})}return a},j=({closeStringsGuide:l,stringingProducts:a})=>e("div",{style:{position:"relative",padding:"12px",marginTop:"8rem",background:"white",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",pointerEvents:"auto",minHeight:"100vh"},children:e("div",{style:{maxWidth:"768px",margin:"0 auto",paddingBottom:"5rem"},children:[e("div",{style:{position:"sticky",top:0,zIndex:10,display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",backgroundColor:"white",padding:"18px 0"},children:[e("span",{onClick:l,style:{outline:"none",display:"flex",gap:"4px",background:"none",border:"none",cursor:"pointer"},children:e("span",{children:"← Back to product"})}),e("button",{onClick:l,style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"×"})]}),e("section",{style:{lineHeight:"1.6",color:"var(--gray-70)"},children:[e("div",{children:[e("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"black"},children:"Badminton Strings Guide"}),e("p",{style:{marginTop:"8px"},children:"Selecting the right string for your racket is crucial as it significantly affects your performance on the court. Our collection provides strings that cater to every playing style."})]}),e("div",{style:{marginTop:"32px",width:"100%",display:"flex",flexDirection:"column",gap:"20px",color:"var(--gray-90)"},children:a.filter(i=>i.availableForSale).map((i,p)=>{var r,n,o;return e("div",{children:[e("div",{style:{padding:"20px 0"},children:[e("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e("img",{width:90,src:(r=i.featuredImage)==null?void 0:r.url,alt:((n=i.featuredImage)==null?void 0:n.altText)||""})}),e("div",{style:{marginTop:"16px"},children:[e("h4",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"8px"},children:i.title}),e("p",{style:{lineHeight:"1.4"},children:((o=i.metafield)==null?void 0:o.value)||"High-quality string designed for optimal performance and durability."}),R(i).length>0&&e("div",{style:{marginTop:"20px",display:"flex",flexDirection:"column",gap:"20px"},children:R(i).map(c=>e("div",{children:[e("h3",{style:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--gray-70)",marginBottom:"4px"},children:c.name}),e("p",{style:{fontSize:"16px",lineHeight:"1.3",color:"black",margin:"0"},children:c.value})]},c.name))}),I(i).length>0&&e("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center",gap:"20px"},children:I(i).map(c=>e(O,{metricName:c.name,rating:c.value},c.name))})]})]}),p<a.filter(c=>c.availableForSale).length-1&&e("hr",{style:{margin:"0",backgroundColor:"#e4e4e4",border:"none",height:"1px"}})]},i.id)})})]})]})});function H({stringingCollectionId:l,maxTension:a}){var S,k,w;const i=parseInt(((S=a==null?void 0:a.match(/\d+/g))==null?void 0:S.pop())||"69"),[p,r]=b([]),[n,o]=b({stringProduct:null,stringVariant:null,tension:null}),[c,x]=b(!1);return P(()=>{(async()=>{var t,d,u,h;try{const{data:s,errors:g}=await F.request(D,{variables:{id:`gid://shopify/Collection/${l}`}});g!=null&&g.message&&console.error({errorsCol:g}),(d=(t=s==null?void 0:s.collection)==null?void 0:t.products)!=null&&d.nodes&&((h=(u=s==null?void 0:s.collection)==null?void 0:u.products)==null?void 0:h.nodes.length)>0&&r((s==null?void 0:s.collection.products.nodes)||[])}catch(s){console.error(s),document.getElementsByClassName("frame")[0].style.display="none"}})()},[]),p.length==0?e("p",{children:"Loading"}):e(z,{children:[e("form",{id:"stringing-form",style:{marginTop:"2rem"},children:[e("div",{id:"strings-container",children:[e("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e("legend",{className:"form__label",children:e("span",{children:"Choose String"})}),e("button",{type:"button",onClick:()=>x(!0),style:{fontFamily:"inherit",border:"none",background:"transparent",padding:0,marginBottom:"0.6rem",whiteSpace:"nowrap",flexShrink:0,outline:"none",textDecoration:"underline",fontSize:"1.3rem",textTransform:"capitalize"},children:"Strings Guide"})]}),p.filter(t=>t.availableForSale).map(t=>{var u,h,s,g,y,f;const d=t==null?void 0:t.id.split("/").pop();return e("label",{className:"sheet",htmlFor:d,style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",alignItems:"center",margin:"1.5rem 0",justifyContent:"space-between",paddingRight:"1rem",overflow:"hidden",transition:"all 0.3s",outline:((u=n.stringProduct)==null?void 0:u.id)===t.id?"2px solid var(--accent-color)":"2px solid transparent"},children:[e("input",{disabled:(t==null?void 0:t.availableForSale)===!1,onChange:v=>{o({stringProduct:t,stringVariant:null,tension:null}),T("string-variants-container")},required:!0,type:"radio",name:"string-product",id:d}),e("div",{style:{display:"flex",alignItems:"center",gridColumn:"1/12",padding:"6px 0",fontSize:"1.4rem"},children:[e("img",{width:80,height:80,src:(h=t.featuredImage)==null?void 0:h.url,alt:((s=t.featuredImage)==null?void 0:s.altText)||""}),e("div",{style:{width:"100%",letterSpacing:"0px"},children:[e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("p",{style:{color:"var(--gray-90)",margin:"0"},children:t==null?void 0:t.title}),((g=t==null?void 0:t.productTagMetafield)==null?void 0:g.value)&&e("span",{style:{fontSize:"12px",color:"#333",padding:"0 8px",borderRadius:"99px",border:"1px solid #999"},children:t.productTagMetafield.value})]}),e("span",{style:{color:"var(--gray-60)",fontSize:"1.25rem"},children:[parseInt(t.priceRange.minVariantPrice.amount)," ",t.priceRange.minVariantPrice.currencyCode]})]}),(y=t==null?void 0:t.metafield)!=null&&y.value?e("p",{style:{margin:"0",lineHeight:"1.4",color:"var(--gray-60)"},children:(f=t==null?void 0:t.metafield)==null?void 0:f.value}):null]})]})]},d)})]}),e("div",{style:{scrollMarginTop:"10rem"},id:"string-variants-container",children:n.stringProduct?e("div",{children:[e("legend",{className:"form__label",children:e("span",{children:["Select Color for ",n.stringProduct.title," String"]})}),e("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"1rem"},children:n.stringProduct.variants.nodes.sort((t,d)=>t.id>d.id?1:-1).sort((t,d)=>t.availableForSale?-1:1).filter(t=>t.availableForSale).map(t=>{var s,g,y,f,v;const d=t.id.split("/").pop(),u=(y=(g=(s=n.stringProduct)==null?void 0:s.options[0].optionValues.find(C=>C.name==t.title))==null?void 0:g.swatch)==null?void 0:y.color,h=t.availableForSale===!1;return e("label",{className:"sheet",htmlFor:d,style:{opacity:h?.1:1,width:"50px",height:"50px",borderRadius:"100%",display:"flex",alignItems:"center",marginRight:"0.4rem",justifyContent:"center",outline:((f=n.stringVariant)==null?void 0:f.id)===t.id?"2px solid var(--accent-color)":"2px solid transparent"},children:[e("input",{"data-sku":t.sku,"data-string":(((v=n==null?void 0:n.stringProduct)==null?void 0:v.title)||"")+" - "+t.title,disabled:t.availableForSale===!1,onChange:C=>{o({stringProduct:n.stringProduct,stringVariant:t,tension:n.tension}),T("string-tensions-container")},required:!0,type:"radio",name:"string-variant",id:d}),u?e("span",{style:{width:"46px",height:"46px",background:u,borderRadius:"100%",display:"block"}}):e("span",{children:t.title})]},d)})})]}):null}),e("div",{style:{scrollMarginTop:"10rem"},id:"string-tensions-container",children:n.stringVariant?e("div",{children:[e("legend",{className:"form__label",children:e("span",{children:"adjust Tension"})}),e("div",{style:{display:"grid",gap:"1.5rem",justifyContent:"start",gridTemplateColumns:"repeat(4, 1fr)",marginTop:"1rem"},children:Array.from({length:20},(t,d)=>d+21).map(t=>e("label",{className:"sheet",htmlFor:String(t),style:{fontSize:window.innerWidth>768?"1.6rem":"1.4rem",display:i<t?"none":"block",padding:"0.8rem 0",textAlign:"center",outline:n.tension===t?"2px solid var(--accent-color)":"2px solid transparent",color:n.tension===t?"black":"var(--gray-70)",transition:"all 0.3s"},children:[e("input",{onChange:d=>{o({stringProduct:n.stringProduct,stringVariant:n.stringVariant,tension:t})},required:!0,type:"radio",name:"string-tension",id:String(t)}),e("span",{children:[t,"LBS"]})]},t))})]}):null}),n.stringVariant&&n.tension?e("div",{style:{background:"rgb(233, 255, 241)",padding:"0.2rem 2rem",borderRadius:"10px",color:"#002d03",fontSize:"1.5rem",lineHeight:"1.6",letterSpacing:"0.03rem"},children:e("p",{children:["All set for the court! You are customising this ",window.s3_product_name," Racket with"," ",(k=n.stringVariant)==null?void 0:k.selectedOptions[0].value," ",(w=n.stringProduct)==null?void 0:w.title,", strung at the tension of"," ",n.tension," LBS."]})}):null]}),e(A,{open:c,onOpenChange:x,children:e(M,{children:[e(B,{style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999}}),e(V,{style:{position:"fixed",top:"0",left:0,width:"100vw",height:"100vh",zIndex:1e3,overflow:"auto",backgroundColor:"rgba(0, 0, 0, 0.5)",pointerEvents:"none"},children:[e(E,{}),e(j,{closeStringsGuide:()=>x(!1),stringingProducts:p})]})]})})]})}const T=l=>{document.getElementById(l)&&setTimeout(()=>{var i;(i=window.document.getElementById(l))==null||i.scrollIntoView({behavior:"smooth"})},500)},m=document.getElementById("stringing-root"),W=(m==null?void 0:m.dataset.stringingCollectionId)||null,N=(m==null?void 0:m.dataset.maxTension)||null;_(e(H,{stringingCollectionId:W,maxTension:N}),m);
