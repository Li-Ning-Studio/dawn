import{u as e,h as S,y as $,k as L,D as K}from"./vx-hooks.module.js";import{R as q,P as G,O as U,C as Q,D as Y}from"./vx-index.js";import{c as J,f as X}from"./vx-shopify-client.js";import{g as P}from"./vx-utils.js";import"./vx-compat.module.js";const Z=({rating:l,metricName:a})=>{const o=80*Math.PI,g=o-l/10*o,s=()=>{switch(a){case"Durability":return"#17c37b";case"Control":return"#0bbcd6";case"Repulsion Power":return"#ff4081";case"Hitting Sound":return"#ffd101";case"Shock Absorption":return"#083ea7";default:return"#000"}},c=()=>{switch(a){case"Shock Absorption":return"Absorption";case"Hitting Sound":return"Sound";case"Repulsion Power":return"Repulsion";default:return a}};return e("div",{style:{position:"relative",display:"flex",height:"130px",width:"130px",alignItems:"center",justifyContent:"center"},children:[e("svg",{height:"100%",width:"100%",viewBox:"0 0 100 100",style:{position:"absolute",transform:"rotate(-90deg)"},children:[e("circle",{stroke:"#ccc",strokeWidth:"7",fill:"transparent",r:40,cx:"50",cy:"50",style:{strokeDasharray:`${o} ${o}`}}),e("circle",{stroke:s(),strokeWidth:"7",strokeDasharray:`${o} ${o}`,style:{strokeDashoffset:g,transition:"stroke-dashoffset 0.35s"},fill:"transparent",r:40,cx:"50",cy:"50"})]}),e("div",{style:{position:"absolute",textAlign:"center"},children:[e("div",{style:{fontSize:"16px",fontWeight:"600"},children:[l,"/",10]}),e("div",{style:{fontSize:"12px"},children:c()})]})]})},E=l=>{const a=[];if(l.metafields&&Array.isArray(l.metafields)){const r=new Map(l.metafields.filter(o=>!!o).map(o=>[o.key,parseInt(o.value)||0]));[{key:"durability",name:"Durability"},{key:"control",name:"Control"},{key:"repulsion_power",name:"Repulsion Power"},{key:"hitting_sound",name:"Hitting Sound"},{key:"shock_absorption",name:"Shock Absorption"}].forEach(({key:o,name:g})=>{const s=r.get(o);typeof s=="number"&&s>0&&a.push({name:g,value:s})})}return a.sort((r,u)=>u.value-r.value).slice(0,3)},V=l=>{const a=[];if(console.log(l.metafields.filter(r=>!!r)),l.metafields&&Array.isArray(l.metafields)){const r=new Map(l.metafields.filter(o=>!!o).map(o=>[o.key,o.value]));[{key:"core_material",name:"CORE MATERIAL"},{key:"outer_material",name:"OUTER MATERIAL"}].forEach(({key:o,name:g})=>{const s=r.get(o);s&&typeof s=="string"&&s.trim()&&a.push({name:g,value:s})})}return a},ee=({closeStringsGuide:l,stringingProducts:a})=>e("div",{style:{position:"relative",padding:"12px",marginTop:"8rem",background:"white",borderTopLeftRadius:"12px",borderTopRightRadius:"12px",pointerEvents:"auto",minHeight:"100vh"},children:e("div",{style:{maxWidth:"768px",margin:"0 auto",paddingBottom:"5rem"},children:[e("div",{style:{position:"sticky",top:0,zIndex:10,display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",backgroundColor:"white",padding:"18px 0"},children:[e("span",{onClick:l,style:{outline:"none",display:"flex",gap:"4px",background:"none",border:"none",cursor:"pointer"},children:e("span",{children:"← Back to product"})}),e("button",{onClick:l,style:{background:"none",border:"none",fontSize:"20px",cursor:"pointer"},children:"×"})]}),e("section",{style:{lineHeight:"1.6",color:"var(--gray-70)"},children:[e("div",{children:[e("h3",{style:{fontSize:"20px",fontWeight:"bold",color:"black"},children:"Badminton Strings Guide"}),e("p",{style:{marginTop:"8px"},children:"Selecting the right string for your racket is crucial as it significantly affects your performance on the court. Our collection provides strings that cater to every playing style."})]}),e("div",{style:{marginTop:"32px",width:"100%",display:"flex",flexDirection:"column",gap:"20px",color:"var(--gray-90)"},children:a.filter(r=>r.availableForSale).map((r,u)=>{var o,g,s;return e("div",{children:[e("div",{style:{padding:"20px 0"},children:[e("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:e("img",{width:90,src:(o=r.featuredImage)==null?void 0:o.url,alt:((g=r.featuredImage)==null?void 0:g.altText)||""})}),e("div",{style:{marginTop:"16px"},children:[e("h4",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"8px"},children:r.title}),e("p",{style:{lineHeight:"1.4"},children:((s=r.metafield)==null?void 0:s.value)||"High-quality string designed for optimal performance and durability."}),V(r).length>0&&e("div",{style:{marginTop:"20px",display:"flex",flexDirection:"column",gap:"20px"},children:V(r).map(c=>e("div",{children:[e("h3",{style:{fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.05em",color:"var(--gray-70)",marginBottom:"4px"},children:c.name}),e("p",{style:{fontSize:"16px",lineHeight:"1.3",color:"black",margin:"0"},children:c.value})]},c.name))}),E(r).length>0&&e("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center",gap:"20px"},children:E(r).map(c=>e(Z,{metricName:c.name,rating:c.value},c.name))})]})]}),u<a.filter(c=>c.availableForSale).length-1&&e("hr",{style:{margin:"0",backgroundColor:"#e4e4e4",border:"none",height:"1px"}})]},r.id)})})]})]})});function te({stringingCollectionId:l,maxTension:a,isKnottingEnabled:r,knottingCost:u,stringingCost:o}){var z,R,A,F,B;const g=r==="true",s=9.5,c=9.5,D=parseInt(((z=a==null?void 0:a.match(/\d+/g))==null?void 0:z.pop())||"69"),[w,N]=S([]),[n,b]=S({stringProduct:null,stringVariant:null,tension:null,knot:"two_knot"}),[O,_]=S(!1),[I,H]=S("All");$(()=>{(async()=>{var t,i,m,f;try{const{data:d,errors:h}=await J.request(X,{variables:{id:`gid://shopify/Collection/${l}`}});h!=null&&h.message&&console.error({errorsCol:h}),(i=(t=d==null?void 0:d.collection)==null?void 0:t.products)!=null&&i.nodes&&((f=(m=d==null?void 0:d.collection)==null?void 0:m.products)==null?void 0:f.nodes.length)>0&&N((d==null?void 0:d.collection.products.nodes)||[])}catch(d){console.error(d),document.getElementsByClassName("frame")[0].style.display="none"}})()},[l]);const k=w.filter(t=>t.availableForSale),j={All:k.length,Power:k.filter(t=>y(t).repulsion>=s).length,Durable:k.filter(t=>y(t).durability>=c).length,Balanced:k.filter(t=>{const i=y(t);return i.repulsion<s&&i.durability<c}).length},W=()=>{const t=k;switch(I){case"Power":return t.filter(i=>y(i).repulsion>=s);case"Durable":return t.filter(i=>y(i).durability>=c);case"Balanced":return t.filter(i=>{const m=y(i);return m.repulsion<s&&m.durability<c});case"All":default:return t}};return w.length==0?e("p",{children:"Loading"}):e(L,{children:[e("form",{id:"stringing-form",style:{marginTop:"2rem"},children:[e("div",{id:"strings-container",children:[e("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e("legend",{className:"form__label",children:e("span",{children:"Choose String"})}),e("button",{type:"button",onClick:()=>_(!0),style:{fontFamily:"inherit",border:"none",background:"transparent",padding:0,marginBottom:"0.6rem",whiteSpace:"nowrap",flexShrink:0,outline:"none",textDecoration:"underline",fontSize:"1.3rem",textTransform:"capitalize"},children:"Strings Guide"})]}),e("div",{style:{marginTop:"1.5rem"},children:[e("style",{children:`
              .stringing-pills [data-count="0"]:not([data-key="All"]) { display: none; }
            `}),e("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",fontSize:"1.4rem"},className:"stringing-pills",children:["All","Power","Durable","Balanced"].map(t=>{const i=I===t;return e("div",{"data-key":t,"data-count":j[t]??0,onClick:()=>H(t),style:{cursor:"pointer",borderRadius:"20px",padding:"0.2rem 1.5rem",background:i?"var(--accent-color, #000)":"#efefef",color:i?"#fff":"inherit",border:"none"},children:t},t)})})]}),W().map(t=>{var m,f,d,h,v,x;const i=t==null?void 0:t.id.split("/").pop();return e("label",{className:"sheet",htmlFor:i,style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",alignItems:"center",margin:"1.5rem 0",justifyContent:"space-between",paddingRight:"1rem",overflow:"hidden",transition:"all 0.3s",outline:((m=n.stringProduct)==null?void 0:m.id)===t.id?"2px solid var(--accent-color)":"2px solid transparent"},children:[e("input",{disabled:(t==null?void 0:t.availableForSale)===!1,onChange:C=>{b({stringProduct:t,stringVariant:null,tension:null,knot:n.knot}),T("string-variants-container")},required:!0,type:"radio",name:"string-product",id:i}),e("div",{style:{display:"flex",alignItems:"center",gridColumn:"1/12",padding:"2px 0",fontSize:"1.4rem"},children:[e("img",{width:80,height:80,src:(f=t.featuredImage)==null?void 0:f.url,alt:((d=t.featuredImage)==null?void 0:d.altText)||""}),e("div",{style:{width:"100%",letterSpacing:"0px"},children:[e("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e("p",{style:{color:"var(--gray-90)",margin:"0"},children:t==null?void 0:t.title}),((h=t==null?void 0:t.productTagMetafield)==null?void 0:h.value)&&e("span",{style:{fontSize:"12px",color:"#333",padding:"0 8px",borderRadius:"99px",border:"1px solid #999"},children:t.productTagMetafield.value})]}),e("span",{style:{color:"var(--gray-60)",fontSize:"1.25rem"},children:[parseInt(t.priceRange.minVariantPrice.amount)," ",t.priceRange.minVariantPrice.currencyCode]})]}),(v=t==null?void 0:t.metafield)!=null&&v.value?e("span",{className:"string-variant-description",children:(x=t==null?void 0:t.metafield)==null?void 0:x.value}):null]})]})]},i)})]}),e("div",{style:{scrollMarginTop:"10rem"},id:"string-variants-container",children:n.stringProduct?e("div",{children:[e("legend",{className:"form__label",children:e("span",{children:["Select Color for ",n.stringProduct.title," String"]})}),e("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"1rem"},children:n.stringProduct.variants.nodes.sort((t,i)=>t.id>i.id?1:-1).sort((t,i)=>t.availableForSale?-1:1).filter(t=>t.availableForSale).map(t=>{var d,h,v,x,C;const i=t.id.split("/").pop(),m=(v=(h=(d=n.stringProduct)==null?void 0:d.options[0].optionValues.find(M=>M.name==t.title))==null?void 0:h.swatch)==null?void 0:v.color,f=t.availableForSale===!1;return e("label",{className:"sheet",htmlFor:i,style:{opacity:f?.1:1,width:"50px",height:"50px",borderRadius:"100%",display:"flex",alignItems:"center",marginRight:"0.4rem",justifyContent:"center",outline:((x=n.stringVariant)==null?void 0:x.id)===t.id?"2px solid var(--accent-color)":"2px solid transparent"},children:[e("input",{"data-sku":t.sku,"data-string":(((C=n==null?void 0:n.stringProduct)==null?void 0:C.title)||"")+" - "+t.title,disabled:t.availableForSale===!1,onChange:M=>{b({stringProduct:n.stringProduct,stringVariant:t,tension:n.tension,knot:n.knot}),T("string-tensions-container")},required:!0,type:"radio",name:"string-variant",id:i}),m?e("span",{style:{width:"46px",height:"46px",background:m,borderRadius:"100%",display:"block"}}):e("span",{children:t.title})]},i)})})]}):null}),e("div",{style:{scrollMarginTop:"10rem"},id:"string-tensions-container",children:n.stringVariant?e("div",{children:[e("legend",{className:"form__label",children:e("span",{children:"adjust Tension"})}),e("div",{style:{display:"grid",gap:"1.5rem",justifyContent:"start",gridTemplateColumns:"repeat(4, 1fr)",marginTop:"1rem"},children:Array.from({length:20},(t,i)=>i+21).map(t=>e("label",{className:"sheet",htmlFor:String(t),style:{fontSize:window.innerWidth>768?"1.6rem":"1.4rem",display:D<t?"none":"block",padding:"0.8rem 0",textAlign:"center",outline:n.tension===t?"2px solid var(--accent-color)":"2px solid transparent",color:n.tension===t?"black":"var(--gray-70)",transition:"all 0.3s"},children:[e("input",{onChange:i=>{b({stringProduct:n.stringProduct,stringVariant:n.stringVariant,tension:t,knot:n.knot}),T("knot-container")},required:!0,type:"radio",name:"string-tension",id:String(t)}),e("span",{children:[t,"LBS"]})]},t))})]}):null}),n.stringVariant&&n.tension&&g?e("div",{id:"knot-container",style:{marginTop:"2rem",scrollMarginTop:"10rem"},children:[e("legend",{className:"form__label",children:e("span",{children:"Stringing Method"})}),e("div",{style:{display:"flex",gap:"1rem",textAlign:"center",marginTop:"1rem"},children:[e("label",{className:"sheet",htmlFor:"two-knots",style:{width:"50%",display:"block",fontSize:window.innerWidth>768?"1.5rem":"1.4rem",borderRadius:"var(--variant-pills-radius)",padding:"1rem",outline:n.knot==="two_knot"?"2px solid var(--accent-color)":"2px solid transparent",color:n.knot==="two_knot"?"black":"var(--gray-70)",transition:"all 0.3s"},children:[e("input",{onChange:t=>{b({stringProduct:n.stringProduct,stringVariant:n.stringVariant,tension:n.tension,knot:"two_knot"})},required:!0,"data-knot-value":"two_knot",checked:n.knot==="two_knot",type:"radio",name:"knot-config",id:"two-knots"}),e("div",{children:[e("p",{style:{margin:0},children:"Two Knots"}),e("p",{style:{margin:"-3px",fontSize:"1.3rem",opacity:.6},children:"FREE"})]})]}),e("label",{className:"sheet",htmlFor:"four-knots",style:{width:"50%",display:"block",fontSize:window.innerWidth>768?"1.5rem":"1.4rem",borderRadius:"var(--variant-pills-radius)",padding:"1rem",outline:n.knot==="four_knot"?"2px solid var(--accent-color)":"2px solid transparent",color:n.knot==="four_knot"?"black":"var(--gray-70)",transition:"all 0.3s"},children:[e("input",{checked:n.knot==="four_knot",onChange:t=>{b({stringProduct:n.stringProduct,stringVariant:n.stringVariant,tension:n.tension,knot:"four_knot"})},required:!0,"data-knot-value":"four_knot",type:"radio",name:"knot-config",id:"four-knots"}),e("div",{children:[e("p",{style:{margin:0},children:"Four Knots"}),e("p",{style:{margin:"-3px",fontSize:"1.3rem",opacity:.6},children:P(u)})]})]})]}),n.knot==="four_knot"?e("p",{style:{fontSize:"1.4rem",opacity:.8},children:"Four Knots method uses two separate pieces of string, one for the mains and one for the crosses, resulting in four tie-off knots. Great for high-tension strings."}):e("p",{style:{fontSize:"1.4rem",opacity:.8},children:"Two Knots method is our default method. This utilizes a single continuous length of string for both the mains and crosses. Suitable for moderate tensions."})]}):null,n.stringVariant&&n.tension?e("div",{style:{background:"rgb(247, 247, 247)",padding:"0.2rem 1.7rem",borderRadius:"10px",color:"#002d03",fontSize:"1.4rem",lineHeight:"1.6",letterSpacing:"0.03rem",marginTop:"1.5rem"},children:[e("p",{children:["All set now! Your custom stringing configuration for ",window.s3_product_name," is complete."]}),[{leftSide:`${(R=n.stringVariant)==null?void 0:R.selectedOptions[0].value} ${(A=n.stringProduct)==null?void 0:A.title} String - ${n.tension} LBS`,rightSide:`${parseInt((F=n.stringVariant)==null?void 0:F.price.amount)} ${(B=n.stringVariant)==null?void 0:B.price.currencyCode}`,shouldShow:n.tension!==null},{leftSide:"Stringing Service",rightSide:P(o),shouldShow:!0},{leftSide:"4 Knots Stringing",rightSide:P(u),shouldShow:n.knot==="four_knot"}].map(({leftSide:t,rightSide:i,shouldShow:m})=>m?e("p",{style:{display:"flex",gap:"1rem",alignItems:"center",justifyContent:"space-between",margin:"1.3rem 0"},children:[e("span",{children:t}),e("span",{style:{flex:1,height:"0.5px",border:"0.5px solid rgba(var(--color-foreground), 0.09)"}}),e("span",{children:i})]}):null)]}):null,e("hr",{style:{margin:"3rem 0"}})]}),e(q,{open:O,onOpenChange:_,children:e(G,{children:[e(U,{style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999}}),e(Q,{style:{position:"fixed",top:"0",left:0,width:"100vw",height:"100vh",zIndex:1e3,overflow:"auto",backgroundColor:"rgba(0, 0, 0, 0.5)",pointerEvents:"none"},children:[e(Y,{}),e(ee,{closeStringsGuide:()=>_(!1),stringingProducts:w})]})]})})]})}const T=l=>{setTimeout(()=>{var r;document.getElementById(l)&&((r=window.document.getElementById(l))==null||r.scrollIntoView({behavior:"smooth"}))},500)},y=l=>{const a=new Map,r=l==null?void 0:l.metafields;if(r&&Array.isArray(r))for(const u of r){if(!u)continue;const o=u.value??"",g=typeof o=="string"?o.match(/\d+(?:\.\d+)?/):null,s=g?parseFloat(g[0]):NaN;Number.isNaN(s)||a.set(u.key,s)}return{durability:a.get("durability")??0,control:a.get("control")??0,repulsion:a.get("repulsion_power")??0,sound:a.get("hitting_sound")??0,shock:a.get("shock_absorption")??0}},p=document.getElementById("stringing-root"),ne=(p==null?void 0:p.dataset.stringingCollectionId)||null,ie=(p==null?void 0:p.dataset.isKnottingEnabled)||null,re=(p==null?void 0:p.dataset.knottingCost)||null,oe=(p==null?void 0:p.dataset.stringingCost)||null,le=(p==null?void 0:p.dataset.maxTension)||null;K(e(te,{stringingCollectionId:ne,maxTension:le,isKnottingEnabled:ie,knottingCost:re,stringingCost:oe}),p);
