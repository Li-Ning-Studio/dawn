import{h as x,y as O,u as e,D as W}from"./vx-hooks.module.js";import{c as D,f as Q}from"./vx-shopify-client.js";import{g as N}from"./vx-utils.js";const j={grippingProduct:null,grippingVariant:null},Y=({grippingCollectionId:c,grippingCost:d,factoryGripImage:m,labels:a,descriptions:u,messages:o})=>{var G,F,T,$,R,z,A;const[h,C]=x([]),[i,f]=x({...j}),[P,y]=x(!0),[V,g]=x(null);O(()=>{let r=!1;if(!c){y(!1),g(o.empty);return}return(async()=>{var n,s;try{y(!0);const{data:t,errors:p}=await D.request(Q,{variables:{id:`gid://shopify/Collection/${c}`}});if(p&&"message"in p&&console.error(p),!r){const l=(s=(n=t==null?void 0:t.collection)==null?void 0:n.products)==null?void 0:s.nodes;l&&Array.isArray(l)&&l.length>0?(C(l),g(null)):g(o.empty)}}catch(t){console.error(t),r||g(o.error)}finally{r||y(!1)}})(),()=>{r=!0}},[c,o.empty,o.error]);const b=(h==null?void 0:h.filter(r=>r.availableForSale))||[],w=(b==null?void 0:b.slice(0,5))||[],I={display:"block",fontSize:typeof window<"u"&&window.innerWidth>768?"1.5rem":"1.4rem",borderRadius:"var(--variant-pills-radius)",padding:"0.2rem 1rem 0.2rem 0.1rem",margin:"1.1rem 0",textAlign:"center",transition:"all 0.3s"},q=((T=(F=(G=i.grippingProduct)==null?void 0:G.variants)==null?void 0:F.nodes)==null?void 0:T.slice().sort((r,n)=>r.id>n.id?1:-1).sort(r=>r.availableForSale?-1:1).filter(r=>r.availableForSale))??[],B=i.grippingVariant?N(`${i.grippingVariant.price.amount} ${i.grippingVariant.price.currencyCode}`):null;if(P)return e("p",{className:"frame-description",children:o.loading});const k=V||(w.length?null:o.empty);return e("form",{id:"grip-form",children:[e("input",{type:"hidden",id:"selected-grip-variant-id","data-current-grip-selection":(($=i.grippingVariant)==null?void 0:$.id.split("Variant/")[1])||"","data-current-grip-sku":((R=i.grippingVariant)==null?void 0:R.sku)||""}),e("div",{id:"grip-products-container",style:{scrollMarginTop:"10rem",marginTop:"2rem"},children:[e("legend",{className:"form__label",children:e("span",{children:a.chooseGrip})}),e("label",{className:"sheet",htmlFor:"grip-product-none",style:{...I,outline:i.grippingProduct?"2px solid transparent":"2px solid var(--accent-color)"},children:[e("input",{onChange:()=>f({...j}),required:!0,type:"radio",name:"grip-product",id:"grip-product-none",checked:i.grippingProduct==null}),e("div",{style:{display:"flex",alignItems:"center"},children:[m?e("div",{children:e("img",{width:70,height:70,src:m,alt:a.noGrip})}):null,e("div",{style:{marginLeft:m?"1.3rem":0,flex:1,textAlign:"left",padding:"0.5rem 0.3rem"},children:[e("div",{style:{display:"flex",justifyContent:"space-between"},children:[e("span",{className:"grip-variant-name",children:a.noGrip}),e("span",{style:{fontSize:"1.3rem"},children:a.free})]}),e("span",{className:"grip-variant-description",children:u.noGrip})]})]})]}),w.map(r=>{var t,p,l,v;const n=r.id.split("/").pop(),s=((t=i.grippingProduct)==null?void 0:t.id)===r.id;return e("label",{className:"sheet",htmlFor:`grip-product-${n}`,style:{...I,outline:s?"2px solid var(--accent-color)":"2px solid transparent"},children:[e("input",{checked:s,onChange:()=>{f({grippingProduct:r,grippingVariant:null}),J("grip-variants-container")},required:!0,type:"radio",name:"grip-product",id:`grip-product-${n}`}),e("div",{style:{display:"flex",alignItems:"center"},children:[e("div",{children:e("img",{width:70,height:70,src:(p=r.featuredImage)==null?void 0:p.url,alt:((l=r.featuredImage)==null?void 0:l.altText)||""})}),e("div",{style:{marginLeft:"1.3rem",flex:1,textAlign:"left"},children:[e("span",{className:"grip-variant-name",children:r.title}),e("span",{className:"grip-variant-description",children:(v=r.metafield)==null?void 0:v.value})]}),e("span",{style:{fontSize:"1.3rem"},children:N(`${r.priceRange.minVariantPrice.amount} ${r.priceRange.minVariantPrice.currencyCode}`)})]})]},n)}),k?e("p",{className:"frame-description",children:k}):null]}),i.grippingProduct?e("div",{id:"grip-variants-container",style:{scrollMarginTop:"10rem",marginTop:"2rem"},children:[e("legend",{className:"form__label",children:e("span",{children:[a.selectColor," ",i.grippingProduct.title?` — ${i.grippingProduct.title}`:""]})}),e("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",marginTop:"1rem"},children:q.map(r=>{var t,p,l,v,E,M,L,_;const n=r.id.split("/").pop(),s=(M=(E=(v=(l=(p=(t=i.grippingProduct)==null?void 0:t.options)==null?void 0:p[0])==null?void 0:l.optionValues)==null?void 0:v.find(H=>H.name===r.title))==null?void 0:E.swatch)==null?void 0:M.color;return e("label",{className:"sheet",htmlFor:`grip-variant-${n}`,style:{opacity:r.availableForSale?1:.1,width:"50px",height:"50px",borderRadius:"100%",display:"flex",alignItems:"center",marginRight:"0.4rem",justifyContent:"center",outline:((L=i.grippingVariant)==null?void 0:L.id)===r.id?"2px solid var(--accent-color)":"2px solid transparent"},children:[e("input",{type:"radio",name:"grip-variant",id:`grip-variant-${n}`,"data-sku":r.sku,disabled:!r.availableForSale,onChange:()=>{f({grippingProduct:i.grippingProduct,grippingVariant:r})},checked:((_=i.grippingVariant)==null?void 0:_.id)===r.id,required:!0}),s?e("span",{style:{width:"46px",height:"46px",background:s,borderRadius:"100%",display:"block"}}):e("span",{style:{fontSize:"0.9rem"},children:r.title})]},n)})})]}):null,u.applicationNote?e("p",{style:{opacity:.8,fontSize:"1.45rem",lineHeight:"1.6"},children:u.applicationNote}):null,i.grippingVariant?e("div",{style:{background:"rgb(247, 247, 247)",padding:"0.2rem 1.7rem",borderRadius:"10px",color:"#002d03",fontSize:"1.4rem",lineHeight:"1.6",letterSpacing:"0.03rem",marginTop:"1.5rem"},children:[e("p",{children:a.summary}),e("p",{style:{display:"flex",gap:"1rem",alignItems:"center",justifyContent:"space-between",margin:"1.3rem 0"},children:[e("span",{children:[(z=i.grippingProduct)==null?void 0:z.title," — ",(A=i.grippingVariant)==null?void 0:A.title]}),e("span",{style:{flex:1,height:"0.5px",border:"0.5px solid rgba(var(--color-foreground), 0.09)"}}),e("span",{children:B})]}),e("p",{style:{display:"flex",gap:"1rem",alignItems:"center",justifyContent:"space-between",margin:"1.3rem 0"},children:[e("span",{children:a.serviceCost}),e("span",{style:{flex:1,height:"0.5px",border:"0.5px solid rgba(var(--color-foreground), 0.09)"}}),e("span",{children:N(d)})]})]}):null,e("hr",{style:"margin: 3rem 0"})]})},J=c=>{setTimeout(()=>{var d;(d=document.getElementById(c))==null||d.scrollIntoView({behavior:"smooth",block:"start"})},200)},S=document.getElementById("gripping-root");if(S){const{grippingCollectionId:c,grippingCost:d,labelChooseGrip:m,labelSelectColor:a,labelSummary:u,labelServiceCost:o,labelVariantPrice:h,labelNoGrip:C,labelFree:i,descriptionNoGrip:f,descriptionApplicationNote:P,messageLoading:y,messageEmpty:V,messageError:g,factoryGripImage:b}=S.dataset;W(e(Y,{grippingCollectionId:c||null,grippingCost:d||null,factoryGripImage:b||null,labels:{chooseGrip:m||"",selectColor:a||"",summary:u||"",serviceCost:o||"",variantPrice:h||"",noGrip:C||"",free:i||""},descriptions:{noGrip:f||"",applicationNote:P||""},messages:{loading:y||"",empty:V||"",error:g||""}}),S)}
