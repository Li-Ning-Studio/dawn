/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "sections": {
    "main": {
      "type": "main-page",
      "settings": {
        "padding_top": 28,
        "padding_bottom": 28
      }
    },
    "custom_liquid_Th49mc": {
      "type": "custom-liquid",
      "name": "t:sections.custom-liquid.presets.name",
      "settings": {
        "custom_liquid": "{% comment %}\n  CUSTOM SPIN THE WHEEL - PHENOM EDITION (Styled Fix + Rigged)\n{% endcomment %}\n\n<div class=\"spin-page-container\">\n  \n  <div class=\"spin-layout\">\n    \n    <div class=\"spin-col-visual\">\n      <div class=\"wheel-pointer-container\"><div class=\"wheel-pointer\">▼</div></div>\n      <div class=\"wheel-outer-rim\">\n        <div class=\"wheel-inner\" id=\"spin-wheel\"></div>\n      </div>\n      <div class=\"wheel-stand\"></div>\n    </div>\n\n    <div class=\"spin-col-content\">\n      \n      <div id=\"spin-state-form\">\n        <h1 class=\"spin-heading\">Spin & Win Phenom Gear</h1>\n        <p class=\"spin-subheading\">Enter your email to unlock an exclusive discount.</p>\n        \n        <div class=\"spin-form-wrapper\">\n          {% form 'customer', id: 'spin-data-form', class: 'spin-form-element', onsubmit: 'return false;' %}\n            \n            <input type=\"hidden\" name=\"contact[tags]\" value=\"newsletter, phenom-spin\">\n            \n            <div class=\"form-row\">\n              <input \n                type=\"email\" \n                name=\"contact[email]\" \n                id=\"spin-email-input\"\n                class=\"spin-input\"\n                placeholder=\"Enter your email address\" \n                required\n              >\n            </div>\n            \n            <button type=\"submit\" id=\"spin-trigger-btn\" class=\"spin-cta\">\n              SPIN THE WHEEL\n            </button>\n            \n            <p id=\"spin-error-msg\" style=\"color:red; display:none; margin-top:10px;\">Please enter a valid email.</p>\n          {% endform %}\n\n        </div>\n        <p class=\"spin-disclaimer\">*One spin per customer.</p>\n      </div>\n\n      <div id=\"spin-state-done\" style=\"display:none; text-align: center;\">\n        <h2>You've already won!</h2>\n        <p>Your code is ready.</p>\n        <button onclick=\"openPrizeModal()\" class=\"spin-cta secondary\">Show My Code</button>\n      </div>\n    </div>\n  </div>\n\n  <div id=\"spin-modal-overlay\" class=\"spin-modal-overlay\" style=\"display:none;\">\n    <div class=\"spin-modal-card\">\n      <h2 class=\"modal-title\">CONGRATULATIONS!</h2>\n      <p class=\"modal-subtitle\">You won <span id=\"modal-prize-name\" style=\"color:#E63946; font-weight:bold;\">...</span></p>\n      \n      <p style=\"margin-top:10px; margin-bottom:5px; font-size:0.9em; color:#666;\">Use this code at checkout:</p>\n      \n      <div class=\"prize-display-box\" onclick=\"copyToClipboard()\">\n        <h3 id=\"modal-coupon-code\" style=\"margin:0; letter-spacing: 1px;\">...</h3>\n      </div>\n      <p id=\"copy-feedback\" style=\"font-size: 0.8em; color: green; display: none; margin-top: 5px;\">Copied to clipboard!</p>\n\n      <button class=\"modal-close-text\" onclick=\"closeModal()\">Close</button>\n    </div>\n  </div>\n\n</div>\n\n<style>\n  /* Base Layout */\n  .spin-page-container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; font-family: sans-serif; display: flex; align-items: center; justify-content: center; min-height: 700px; }\n  .spin-layout { display: flex; align-items: center; justify-content: space-between; width: 100%; gap: 60px; }\n  \n  /* Mobile Stack */\n  @media (max-width: 900px) { \n    .spin-layout { flex-direction: column; text-align: center; gap: 40px; } \n    .spin-page-container { padding: 20px 10px; }\n  }\n\n  .spin-col-visual, .spin-col-content { flex: 1; }\n  .spin-col-visual { display: flex; flex-direction: column; align-items: center; position: relative; }\n  \n  .spin-heading { font-size: 2.5rem; font-weight: 800; margin-bottom: 20px; line-height: 1.1; }\n  .spin-subheading { font-size: 1.1rem; color: #555; margin-bottom: 30px; }\n  .spin-input { width: 100%; padding: 15px; font-size: 1rem; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 15px; box-sizing: border-box; }\n  .spin-cta { display: block; width: 100%; padding: 18px; background: #000; color: #fff; font-weight: bold; text-transform: uppercase; border: none; border-radius: 8px; cursor: pointer; text-decoration: none; text-align: center; transition: 0.3s; }\n  .spin-cta:hover { background: #333; }\n  .spin-cta:disabled { background: #999; cursor: wait; }\n\n  /* WHEEL UI SIZING */\n  .wheel-outer-rim { width: 500px; height: 500px; border-radius: 50%; border: 12px solid #222; position: relative; overflow: hidden; background: #fff; box-shadow: 0 10px 40px rgba(0,0,0,0.25); }\n  @media (max-width: 600px) { .wheel-outer-rim { width: 350px; height: 350px; border-width: 8px; } }\n\n  .wheel-inner { width: 100%; height: 100%; border-radius: 50%; position: relative; transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); } \n  .wheel-pointer-container { position: absolute; top: -30px; z-index: 10; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3)); }\n  .wheel-pointer { font-size: 60px; color: #E63946; }\n\n  /* TEXT ON WHEEL */\n  .wheel-text-label {\n    position: absolute; \n    top: 50%; left: 50%;\n    color: white; \n    font-weight: bold; \n    text-transform: uppercase;\n    text-align: center; \n    white-space: nowrap;\n    text-shadow: 0 1px 3px rgba(0,0,0,0.4);\n    pointer-events: none;\n    font-size: 18px; /* Desktop Size */\n  }\n  \n  @media (max-width: 600px) {\n    .wheel-text-label { font-size: 13px !important; }\n  }\n\n  /* MODAL */\n  .spin-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 9999; display: flex; justify-content: center; align-items: center; }\n  .spin-modal-card { background: #fff; padding: 40px; border-radius: 12px; width: 90%; max-width: 450px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }\n  .prize-display-box { background: #f4f4f4; padding: 20px; border: 2px dashed #000; margin: 20px 0; cursor: pointer; transition: background 0.2s; }\n  .prize-display-box:hover { background: #eee; }\n  .modal-title { color: #E63946; margin: 0 0 10px 0; }\n  .modal-close-text { background: none; border: none; text-decoration: underline; color: #777; margin-top: 15px; cursor: pointer; }\n</style>\n\n<script>\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n\n  // URL CLEANER\n  if (window.location.hash === '#spin-data-form' || window.location.search.includes('contact')) {\n     const cleanUrl = window.location.pathname; \n     window.history.replaceState(null, null, cleanUrl);\n     window.scrollTo(0, 0);\n  }\n\n  // --- CONFIG: OFFERS ---\n  const offers = [\n    { id: 0, text: \"₹200 OFF\", code: \"PLDCA200\", color: \"#264653\" },\n    { id: 1, text: \"₹500 OFF\", code: \"PLDCA5OFF\", color: \"#2A9D8F\" },\n    { id: 2, text: \"₹1000 OFF\", code: \"NOPE\", color: \"#E9C46A\" },\n    { id: 3, text: \"Free Phenom\", code: \"NOPE\", color: \"#F4A261\" }\n  ];\n\n  const wheelEl = document.getElementById('spin-wheel');\n  const formEl = document.getElementById('spin-data-form');\n  const btn = document.getElementById('spin-trigger-btn');\n  \n  // --- INIT VISUALS ---\n  // 1. Gradient Background (Conic Slices)\n  let gradient = `conic-gradient(`;\n  offers.forEach((o, i) => {\n    gradient += `${o.color} ${i * 90}deg ${(i + 1) * 90}deg`;\n    if(i < offers.length - 1) gradient += `, `;\n  });\n  gradient += `)`;\n  wheelEl.style.background = gradient;\n\n  // 2. Text Labels (RADIAL SPOKE ALIGNMENT FIX)\n  offers.forEach((o, i) => {\n    const text = document.createElement('div');\n    text.className = 'wheel-text-label';\n    text.innerText = o.text;\n    \n    // Logic: \n    // - Rotate the coordinate system to point to the middle of the slice.\n    // - Translate OUTWARD to push text to the rim.\n    // - Angle Calculation: i*90 + 45 is the center of the slice.\n    // - To align text 'radially' (reading from center out), we rotate it so it sits on that line.\n    \n    // Center of wedge in degrees (0 = Top/North, Clockwise)\n    const wedgeCenterAngle = (i * 90) + 45; \n    \n    // CSS Rotate: 0deg points to North (if we assume standard element upright).\n    // Actually, horizontal text runs 90deg relative to North.\n    // To point text outward at angle X: Rotate X - 90deg.\n    // Example: Top Right (45deg). Text needs to point 45deg. Horizontal is 90deg. Rotate -45.\n    \n    const textRotation = wedgeCenterAngle - 90; \n    \n    // Distance from center (Radius is 250px Desktop / 175px Mobile)\n    // We want text roughly in the middle-ish (say 60-65% out).\n    const isMobile = window.innerWidth <= 600;\n    const distance = isMobile ? 110 : 160; \n\n    // Apply Transform:\n    // 1. Rotate text element around its center (which is currently at wheel center).\n    // 2. Translate along the X axis (which is now pointing in the wedge direction).\n    text.style.transform = `rotate(${textRotation}deg) translate(${distance}px) rotate(0deg)`;\n    \n    wheelEl.appendChild(text);\n  });\n\n  // --- CHECK HISTORY ---\n  const savedPrizeIndex = localStorage.getItem('phenom_spin_index');\n  if (savedPrizeIndex !== null) {\n    showPostSpinState(savedPrizeIndex); \n    setTimeout(() => { openPrizeModal(); }, 500); \n  }\n\n  // --- SUBMIT HANDLER ---\n  if(formEl){\n    formEl.addEventListener('submit', function(e) { e.preventDefault(); runSpin(); });\n  }\n\n  function runSpin() {\n    const emailInput = document.getElementById('spin-email-input');\n    const email = emailInput.value;\n    \n    if(!email || !email.includes('@')){\n       document.getElementById('spin-error-msg').style.display = 'block';\n       return;\n    }\n\n    btn.disabled = true;\n    btn.innerText = \"SPINNING...\";\n\n    // --- RIGGED LOGIC ---\n    // Winner is ONLY index 0 or 1.\n    const winnerIndex = Math.random() < 0.5 ? 0 : 1; \n    localStorage.setItem('phenom_spin_index', winnerIndex);\n\n    // Calculate Stop Angle\n    // Target is top center (0deg).\n    // Center of winner wedge is: winnerIndex*90 + 45.\n    // Rotate BACKWARDS by that amount + 5 full spins.\n    const rotation = -(winnerIndex * 90 + 45) + (360 * 5); \n    \n    wheelEl.style.transform = `rotate(${rotation}deg)`;\n\n    // Send Data\n    const formData = new FormData(formEl);\n    fetch('/contact', { method: 'POST', body: formData }).catch(e => console.log(e));\n\n    // Show Result\n    setTimeout(() => {\n      showPostSpinState(winnerIndex);\n      openPrizeModal();\n    }, 4000);\n  }\n\n  function showPostSpinState(index) {\n    document.getElementById('spin-state-form').style.display = 'none';\n    document.getElementById('spin-state-done').style.display = 'block';\n    if (wheelEl.style.transform === '') {\n       const rotation = -(index * 90 + 45);\n       wheelEl.style.transition = 'none'; \n       wheelEl.style.transform = `rotate(${rotation}deg)`;\n    }\n  }\n\n  // --- MODAL UTILS ---\n  window.openPrizeModal = function() {\n    const index = localStorage.getItem('phenom_spin_index');\n    if(index !== null) {\n      const data = offers[index];\n      document.getElementById('modal-prize-name').innerText = data.text;\n      document.getElementById('modal-coupon-code').innerText = data.code;\n      document.getElementById('spin-modal-overlay').style.display = 'flex';\n    }\n  }\n\n  window.closeModal = function() {\n    document.getElementById('spin-modal-overlay').style.display = 'none';\n  }\n\n  window.copyToClipboard = function() {\n    const code = document.getElementById('modal-coupon-code').innerText;\n    navigator.clipboard.writeText(code).then(() => {\n      document.getElementById('copy-feedback').style.display = 'block';\n    });\n  }\n\n});\n</script>",
        "color_scheme": "",
        "padding_top": 40,
        "padding_bottom": 52
      }
    }
  },
  "order": [
    "main",
    "custom_liquid_Th49mc"
  ]
}
