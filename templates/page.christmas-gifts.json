/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "sections": {
    "main": {
      "type": "main-page",
      "settings": {
        "padding_top": 28,
        "padding_bottom": 28
      }
    },
    "custom_liquid_EgmkpY": {
      "type": "custom-liquid",
      "name": "t:sections.custom-liquid.presets.name",
      "settings": {
        "custom_liquid": "{% comment %}\n  CUSTOM MYSTERY GIFT BOX SECTION\n  - Replaces Spin Wheel with 4 Colored Gift Boxes\n  - Same Email Logic & Popup\n{% endcomment %}\n\n<div class=\"gift-page-container\">\n  \n  <div class=\"gift-layout\">\n    \n    <div class=\"gift-col-visual\">\n      <div class=\"gift-grid\" id=\"gift-box-container\">\n        <img src=\"https://cdn.shopify.com/s/files/1/0933/9378/1029/files/Gift_Box_in_Red_PNG_Clipart-276.png?v=1766315618\" \n             class=\"gift-box\" data-index=\"0\" alt=\"Mystery Gift 1\">\n        \n        <img src=\"https://cdn.shopify.com/s/files/1/0933/9378/1029/files/Gift_Box_in_Red_PNG_Clipart-276.png?v=1766315618\" \n             class=\"gift-box\" data-index=\"1\" alt=\"Mystery Gift 2\">\n             \n        <img src=\"https://cdn.shopify.com/s/files/1/0933/9378/1029/files/Gift_Box_in_Red_PNG_Clipart-276.png?v=1766315618\" \n             class=\"gift-box\" data-index=\"2\" alt=\"Mystery Gift 3\">\n             \n        <img src=\"https://cdn.shopify.com/s/files/1/0933/9378/1029/files/Gift_Box_in_Red_PNG_Clipart-276.png?v=1766315618\" \n             class=\"gift-box\" data-index=\"3\" alt=\"Mystery Gift 4\">\n      </div>\n    </div>\n\n    <div class=\"gift-col-content\">\n      \n      <div id=\"gift-state-form\">\n        <h1 class=\"gift-heading\">Pick Your Mystery Gift</h1>\n        <p class=\"gift-subheading\">Enter your email to unlock one of the mystery boxes. Guaranteed win.</p>\n        \n        <div class=\"gift-form-wrapper\">\n          {% form 'customer', id: 'gift-data-form', class: 'gift-form-element', onsubmit: 'return false;' %}\n            <input type=\"hidden\" name=\"contact[tags]\" value=\"newsletter, gift-box-prospect\">\n            <div class=\"form-row\">\n              <input \n                type=\"email\" \n                name=\"contact[email]\" \n                id=\"gift-email-input\"\n                class=\"gift-input\"\n                placeholder=\"Enter your email address\" \n                required\n              >\n            </div>\n            <button type=\"submit\" id=\"gift-trigger-btn\" class=\"gift-cta\">OPEN MY GIFT</button>\n            <p id=\"gift-error-msg\" style=\"color:red; display:none; margin-top:10px;\">Please enter a valid email.</p>\n          {% endform %}\n        </div>\n        <p class=\"gift-disclaimer\">*One gift per customer.</p>\n      </div>\n\n      <div id=\"gift-state-done\" style=\"display:none; text-align: center;\">\n        <h2>Gift Unlocked!</h2>\n        <p>Your reward is ready.</p>\n        <button onclick=\"openPrizeModal()\" class=\"gift-cta secondary\">Show My Coupon</button>\n      </div>\n    </div>\n  </div>\n\n  <div id=\"gift-modal-overlay\" class=\"gift-modal-overlay\" style=\"display:none;\">\n    <div class=\"gift-modal-card\">\n      <h2 class=\"modal-title\">CONGRATULATIONS!</h2>\n      <p class=\"modal-subtitle\">You found:</p>\n      <div class=\"prize-display-box\"><h3 id=\"modal-prize-name\" style=\"margin:0;\">...</h3></div>\n      <p class=\"modal-instruction\">Discount auto-applied at checkout.</p>\n      <a id=\"modal-cta-link\" href=\"#\" class=\"gift-cta modal-btn\">CLAIM NOW</a>\n      <button class=\"modal-close-text\" onclick=\"closeModal()\">Close</button>\n    </div>\n  </div>\n\n</div>\n\n<style>\n  /* Base Layout */\n  .gift-page-container { max-width: 1200px; margin: 0 auto; padding: 40px 20px; font-family: sans-serif; display: flex; align-items: center; justify-content: center; min-height: 700px; }\n  .gift-layout { display: flex; align-items: center; justify-content: space-between; width: 100%; gap: 60px; }\n  \n  @media (max-width: 900px) { \n    .gift-layout { flex-direction: column; text-align: center; gap: 40px; } \n    .gift-page-container { padding: 20px 10px; }\n  }\n\n  .gift-col-visual, .gift-col-content { \n    max-width: 500px;\n    flex: 1; }\n  .gift-col-visual { display: flex; flex-direction: column; align-items: center; justify-content: center; }\n  \n  /* --- NEW: GIFT GRID VISUALS --- */\n  .gift-grid {\n    display: grid;\n    grid-template-columns: 1fr 1fr; /* 2x2 Grid */\n    gap: 20px;\n    width: 100%;\n    max-width: 500px; /* Desktop Size */\n  }\n\n  /* Mobile Size Override */\n  @media (max-width: 600px) {\n    .gift-grid { max-width: 350px; gap: 15px; }\n  }\n\n  .gift-box {\n    width: 100%;\n    height: auto;\n    cursor: pointer;\n    transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Bouncy effect */\n    filter: drop-shadow(0 5px 15px rgba(0,0,0,0.2));\n  }\n\n  /* --- COLOR FILTERS --- */\n  /* Box 1: Red (Original) */\n  .gift-box[data-index=\"0\"] { filter: hue-rotate(0deg); }\n  /* Box 2: Green */\n  .gift-box[data-index=\"1\"] { filter: hue-rotate(90deg); }\n  /* Box 3: Blue */\n  .gift-box[data-index=\"2\"] { filter: hue-rotate(180deg); }\n  /* Box 4: Purple */\n  .gift-box[data-index=\"3\"] { filter: hue-rotate(270deg); }\n\n  /* --- ANIMATION STATES --- */\n  /* The Winner: Get big, clear, and glowing */\n  .gift-box.winner-state {\n    transform: scale(1.15);\n    z-index: 10;\n    filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.6)) hue-rotate(var(--hue)); /* Keep color but add glow */\n  }\n\n  /* The Losers: Fade out and shrink */\n  .gift-box.loser-state {\n    opacity: 0.2;\n    transform: scale(0.8);\n    filter: grayscale(100%);\n  }\n\n  /* --- FORM STYLES --- */\n  .gift-heading { font-size: 3.5rem; font-weight: 800; margin-bottom: 20px; line-height: 1.1; }\n  .gift-subheading { font-size: 1.5rem; color: #555; margin-bottom: 30px; }\n  .gift-input { width: 100%; padding: 15px; font-size: 1.5rem; border: 2px solid #ddd; border-radius: 8px; margin-bottom: 15px; box-sizing: border-box; }\n  .gift-cta { display: block; width: 100%; padding: 18px; background: #000; color: #fff; font-weight: bold; text-transform: uppercase; border: none; border-radius: 8px; cursor: pointer; text-decoration: none; text-align: center; transition: 0.3s; }\n  .gift-cta:hover { background: #333; }\n  .gift-cta:disabled { background: #999; cursor: wait; }\n\n  /* MODAL */\n  .gift-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 9999; display: flex; justify-content: center; align-items: center; }\n  .gift-modal-card { background: #fff; padding: 40px; border-radius: 12px; width: 90%; max-width: 450px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }\n  .prize-display-box { background: #f4f4f4; padding: 20px; border: 2px dashed #000; margin: 20px 0; }\n  .modal-title { color: #E63946; margin: 0 0 10px 0; }\n  .modal-close-text { background: none; border: none; text-decoration: underline; color: #777; margin-top: 15px; cursor: pointer; }\n</style>\n\n<script>\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n\n  // URL CLEANER\n  if (window.location.hash === '#gift-data-form' || window.location.search.includes('contact')) {\n     const cleanUrl = window.location.pathname; \n     window.history.replaceState(null, null, cleanUrl);\n     window.scrollTo(0, 0);\n  }\n\n  // CONFIG (Same 4 offers)\n  const offers = [\n    { id: 0, full: \"Buy a racket & get grip FREE\", url: \"/collections/freebie-rackets-between-2-5k-to-5k\" },\n    { id: 1, full: \"Buy a racket & get grip & wristband FREE\", url: \"/collections/winter-bundle-free-grip-wristbands\" },\n    { id: 2, full: \"Buy a racket & get Grip + Wristband + stringing service FREE\", url: \"/collections/winter-bundle-free-grip-wristbands-copy\" },\n    { id: 3, full: \"Buy a Shoe and get sock FREE\", url: \"/collections/free-socks-product\" }\n  ];\n\n  const formEl = document.getElementById('gift-data-form');\n  const btn = document.getElementById('gift-trigger-btn');\n  const boxes = document.querySelectorAll('.gift-box');\n\n  // CHECK HISTORY\n  const savedPrizeIndex = localStorage.getItem('gift_prize_index');\n  if (savedPrizeIndex !== null) {\n    applyVisuals(parseInt(savedPrizeIndex)); // Show previous winner\n    showPostWinState();\n    setTimeout(() => { openPrizeModal(); }, 500); \n  }\n\n  // SUBMIT HANDLER\n  if(formEl){\n    formEl.addEventListener('submit', function(e) { e.preventDefault(); runGame(); });\n  }\n\n  function runGame() {\n    const emailInput = document.getElementById('gift-email-input');\n    const email = emailInput.value;\n    \n    if(!email || !email.includes('@')){\n       document.getElementById('gift-error-msg').style.display = 'block';\n       return;\n    }\n\n    btn.disabled = true;\n    btn.innerText = \"OPENING...\";\n\n    // 1. Logic: Pick Winner\n    const winnerIndex = Math.floor(Math.random() * offers.length);\n    localStorage.setItem('gift_prize_index', winnerIndex);\n\n    // 2. Visuals: Animate Boxes\n    applyVisuals(winnerIndex);\n\n    // 3. Data: Send to Shopify\n    const formData = new FormData(formEl);\n    fetch('/contact', { method: 'POST', body: formData }).catch(e => console.log(e));\n\n    // 4. Result: Show Popup after delay\n    setTimeout(() => {\n      showPostWinState();\n      openPrizeModal();\n    }, 1500); // 1.5s delay to admire the animation\n  }\n\n  function applyVisuals(winnerIndex) {\n    boxes.forEach(box => {\n      const boxIndex = parseInt(box.getAttribute('data-index'));\n      \n      if(boxIndex === winnerIndex) {\n        // We need to re-apply the specific hue rotate for the winner because \n        // simply adding a class might override the ID-based specific hue styles depending on specificity.\n        // Instead, let's keep the hue logic in CSS vars or just rely on the cascade.\n        // The safest way is to preserve the hue in the style attribute.\n        \n        let hue = 0;\n        if(boxIndex === 1) hue = 90;\n        if(boxIndex === 2) hue = 180;\n        if(boxIndex === 3) hue = 270;\n        \n        box.style.setProperty('--hue', hue + 'deg'); // Used in CSS for glow\n        box.classList.add('winner-state');\n        box.classList.remove('loser-state');\n      } else {\n        box.classList.add('loser-state');\n        box.classList.remove('winner-state');\n      }\n    });\n  }\n\n  function showPostWinState() {\n    document.getElementById('gift-state-form').style.display = 'none';\n    document.getElementById('gift-state-done').style.display = 'block';\n  }\n\n  window.openPrizeModal = function() {\n    const index = localStorage.getItem('gift_prize_index');\n    if(index !== null) {\n      const data = offers[index];\n      document.getElementById('modal-prize-name').innerText = data.full;\n      document.getElementById('modal-cta-link').href = data.url;\n      document.getElementById('gift-modal-overlay').style.display = 'flex';\n    }\n  }\n\n  window.closeModal = function() {\n    document.getElementById('gift-modal-overlay').style.display = 'none';\n  }\n\n});\n</script>",
        "color_scheme": "",
        "padding_top": 0,
        "padding_bottom": 52
      }
    }
  },
  "order": [
    "main",
    "custom_liquid_EgmkpY"
  ]
}
